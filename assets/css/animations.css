/* ===============================================
   ANIMATIONS & MICRO-INTERACTIONS (UNIFIÉ)
   - Compat: .fadeIn/.fade-in, .slideUp/.reveal-up
   - Respecte prefers-reduced-motion
   - AOS optionnel
   - BackToTop hover, underline nav active
   - Spinner du loader
=============================================== */

/* Smooth scroll (gardé ici si non déjà défini globalement) */
html { scroll-behavior: smooth; }

/* ----- Fade In (2 alias: .fade-in et .fadeIn) ----- */
@keyframes fade-in {
  from { opacity: 0; transform: translateY(20px); }
  to   { opacity: 1; transform: translateY(0); }
}
.fade-in, .fadeIn {
  animation: fade-in 0.9s ease forwards;
}

/* ----- Slide Up (2 alias: .reveal-up et .slideUp) ----- */
/* Variante animée directe (.slideUp) */
@keyframes slide-up {
  from { opacity: 0; transform: translateY(40px); }
  to   { opacity: 1; transform: translateY(0); }
}
.slideUp { animation: slide-up 0.8s ease forwards; }

/* Variante progressive contrôlée par JS (IntersectionObserver) :
   On laisse .reveal-up "off" par défaut, et .is-visible l’active */
.reveal-up { opacity: 0; transform: translateY(12px); transition: transform .6s ease, opacity .6s ease; }
.reveal-up.is-visible { opacity: 1; transform: translateY(0); }

/* ----- Bounce (pour CTA/Hero) ----- */
@keyframes bounce {
  0%, 100% { transform: translateY(0); }
  50%      { transform: translateY(-8px); }
}
.bounce { animation: bounce 2s infinite; }

/* ----- AOS (optionnel si activé) ----- */
[data-aos] { opacity: 0; transition-property: opacity, transform; }
[data-aos].aos-animate { opacity: 1; }

/* ----- Back To Top hover ----- */
#backToTop { transition: transform .3s ease; }
#backToTop:hover { transform: translateY(-3px); }

/* ----- Nav active underline (compatible avec fond actif) ----- */
.nav-link.active { position: relative; }
.nav-link.active::after {
  content: "";
  position: absolute;
  bottom: -5px; left: 0;
  width: 100%; height: 2px;
  background: var(--primary-color);
  border-radius: 1px;
}

/* ----- Loader spinner (ne redéfinit pas #loader, seulement la roue) ----- */
.spinner-border {
  width: 3rem; height: 3rem;
  border: 4px solid var(--primary-color);
  border-top-color: transparent;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }

/* ----- Respect des préférences utilisateur ----- */
@media (prefers-reduced-motion: reduce) {
  .fade-in, .fadeIn, .slideUp, .reveal-up { animation-duration: 1ms !important; transition-duration: 1ms !important; }
  .bounce, .spinner-border { animation: none !important; }
}
